services:
  - type: web
    name: buzzguard-website
    env: static
    buildCommand: echo "No build needed for static site"
    staticPublishPath: .
    routes:
      - type: rewrite
        source: /api/*
        destination: https://buzzguard-backend.onrender.com/api/*
      - type: rewrite  
        source: /*
        destination: /index.html

headers:
  - source: /*
    headers:
      - key: X-Frame-Options
        value: DENY
      - key: X-Content-Type-Options
        value: nosniff
      - key: X-XSS-Protection
        value: "1; mode=block"
      - key: Referrer-Policy
        value: strict-origin-when-cross-origin
      - key: Content-Security-Policy
        value: "default-src 'self'; script-src 'self' 'unsafe-inline' https://www.gstatic.com https://www.gstatic.com/firebasejs; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; connect-src 'self' https://buzzguard-backend.onrender.com https://*.firebaseio.com; font-src 'self' data:;"

  - source: /images/*
    headers:
      - key: Cache-Control
        value: "public, max-age=31536000"
        
  - source: /*.css
    headers:
      - key: Cache-Control
        value: "public, max-age=31536000"
        
  - source: /*.js
    headers:
      - key: Cache-Control
        value: "public, max-age=31536000"